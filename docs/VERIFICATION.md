# Верификация, фото, документы и дипломы

Верификация — отдельный домен. Учитывает: личность, фото, документы (паспорт, лицензии), дипломы и сертификаты. Данные и типы не смешивать с «просто профилем».

---

## 1. Уровни верификации (уже в продукте)

Используются на карточке охранника и в профиле:

| Уровень | Значение | Описание |
|---------|----------|----------|
| none | 0 | Без верификации |
| basic | 1 | Базовая (телефон/почта) |
| standard | 2 | Стандарт: фото + один документ |
| premium | 3 | Премиум: документы + диплом/сертификат |
| elite | 4 | Элит: полный пакет, проверка фирмой/модерацией |

Логика и отображение уровней живут в домене **Verification**, типы — в `domains/verification`.

---

## 2. Фото

- **Аватар (профиль)** — одно основное фото пользователя/охранника. Требования: формат, размер, соотношение сторон — описать в контракте API (например в shared-спецификации).
- **Фото для верификации** — селфи с документом или по заданию системы (например «лицо в кадре»). Привязка к заявке на верификацию, не к «галерее» профиля.
- **Хранение:** только ссылки и метаданные на фронте; загрузка через API (multipart). В типах — `photoUrl`, `photoId`, статус проверки (pending / approved / rejected).

Отдельный модуль в фиче verification может отвечать за: выбор/съёмку фото, превью, отправку на бэк. Не смешивать с общим «редактором профиля».

---

## 3. Документы

Типы документов, которые могут требоваться для верификации и для допуска к заказам:

| Тип документа | Описание | Кто загружает |
|---------------|----------|----------------|
| Паспорт (ID) | Удостоверение личности | Агент/охранник |
| Лицензия охранника | Разрешение на деятельность | Агент |
| Договор/контракт с фирмой | Скан подписанного | Агент / Фирма |
| Прочие (по запросу) | Специфичные для региона/фирмы | По сценарию |

Для каждого документа в контракте (типы) задаём:

- `documentType` — enum или строка из справочника.
- `fileId` / `url` — ссылка на загруженный файл (бэкенд отдаёт после загрузки).
- `status`: `pending` | `verified` | `rejected` (опционально `rejectionReason`).
- `verifiedAt`, `verifiedBy` — при проверке модератором/фирмой.
- Метаданные: название, дата выдачи (если вводятся вручную).

Дипломы и сертификаты — подмножество документов с типом, например `diploma`, `certificate`, и при необходимости полем «наименование курса/организации».

---

## 4. Дипломы и сертификаты

- **Дипломы** — образование (охранное дело, право и т.п.). Поля: тип (diploma), название организации, название документа, дата, файл (скан).
- **Сертификаты** — курсы, переподготовка, международные стандарты (как в Академии безопасности). Аналогично: тип (certificate), организация, название, дата, файл.
- В карточке охранника и в «премиум/элит» можно показывать только факт «дипломы проверены» или краткий список без тяжёлых файлов; полный список и сканы — в разделе верификации/профиля.

Типы в `domains/verification`: например `VerificationDocument`, `DocumentType` (паспорт, лицензия, диплом, сертификат), `VerificationLevel`. Загрузка и отображение — в `features/verification`.

---

## 5. Поток верификации (кратко)

1. Пользователь (агент/охранник) открывает раздел «Верификация» или «Документы».
2. Система показывает, какие шаги обязательны для нужного уровня (фото, паспорт, лицензия, диплом и т.д.).
3. По каждому шагу: загрузка файла (или фото с камеры), при необходимости краткая форма (название, дата).
4. Статус по каждому документу: на проверке / одобрен / отклонён.
5. После выполнения условий уровень верификации пересчитывается (на бэкенде) и отображается в профиле и на карточке.

Экраны и компоненты этой цепочки относятся к **features/verification**, без смешивания с общим редактированием профиля. Так архитектура остаётся гибкой и не перегружает один «профиль».

---

## 6. Связь с MODEL.md

- **Агент** перед допуском к заказам (или к уровню premium/elite) проходит верификацию: фото, документы, при необходимости дипломы.
- **Фирма** может требовать свой набор документов и видеть статус верификации агента.
- **Клиент** видит только итоговый уровень верификации на карточке охранника (и при желании короткую подпись «Документы проверены» и т.п.), без доступа к сканам.

Типы и статусы верификации едины для всех ролей; различается только объём отображаемой информации и экраны (агент — загрузка и статусы, клиент — бейдж уровня).
